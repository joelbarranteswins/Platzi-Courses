# ğŸ Notas del Curso de Entorno de Trabajo para Ciencia de Datos

IntroducciÃ³n a las notebooks.
Â¿En quÃ© lugares programar para ciencia de datos?

Aprenderemos sobre Jupyter Notebooks, herramientas elementales, ambientes virtuales con Conda ğŸ.
Podemos programar en varios lugares: Navegador, de manera local, en un servidor, en el celular ğŸ¤¯.
Puedes hacer esto en distintos sistemas operativos, en cualquiera estÃ¡ bien, pero por lo general se prefiere en un OS basado en Linux o Unix (cÃ³mo Ubunto o MacOS). Si prefieres Windows, puedes usar WSL ğŸ˜„.
Google Colab, Deepnote, VSCode, Jupyter Notebooks, etcâ€¦ ğŸ§ . Todas estas herramientas comparten una cosa: los notebooks, que hacen el proceso mÃ¡s dinÃ¡mico!.
En 2001, el FÃ­sico colombiano Fernando PÃ©rez comenzÃ³ a trabajar en el desarrollo IPython ğŸ‘€. De aquÃ­ siguiÃ³ Jupyter Notebook ğŸ—’ï¸. Â¡Es una herramienta fundamental! Se pueden entender como reportes ejectuables.
Notebooks vs Scripts:
Ambos son Ãºtiles.
Tienen diferencias en organizaciÃ³n: En un script se ve el cÃ³digo sin interrupciones.
    ExperimentaciÃ³n y prototipado.
    Tienen objetivo diferente!.

## Google Colab: Primeros pasos.

Es una herramienta basada en la nube que te permite trabajar en notebooks, y se guardan en tu cuenta de Google Drive ğŸ˜ƒ.

Nube vs local: Ambas son Ãºtiles, pero se diferencian en la configuraciÃ³n de entornos, ya que en la nube ya estÃ¡n precargadas, y de local tienes que configurarlo manualmente. TambiÃ©n es diferente el tiempo de ejecuciÃ³n y la escalabilidad: la nube tiene mÃ¡s poder porque puedes rentarlo!. ğŸ’¸

Google Colab: Servicio en la nube basado en Jupyter Notebooks, no requiere configuraciÃ³n y tiene un trabajo a nivel de archivo (el notebook es la base). Tiene uso de gratuito de GPUs y TPUs para correr modelos grandes. â˜ï¸

Puedes acceder a Google Colab desde tu drive o desde el navegador.

Para aprender Markdown.

Markdown Guide

Las variables son persistentes (se conservan) entre celdas de cÃ³digo!. ğŸ”¥

Para llamar a la lÃ­nea de comandos, debemos usar primero un signo de admiraciÃ³n ! y luego un comando vÃ¡lido, por ejemplo !pwd o !pip install session-info.

## Google Colab: Ciencia de datos.

Google Colab incluye varias herramientas:

Podemos subir archivos a Colab para trabajar con ellos (tambiÃ©n tienen datos de muestra) ğŸ”¢. DÃ¡ndole click podemos previsualizar e incluso filtrar la tabla que hayamos subido.
Podemos montar nuestro Google Drive en nuestro Notebook, con lo que podremos trabajar con datos que estÃ©n en nuestro Drive. ğŸ¤“ Es lo mÃ¡s recomendable ya que los archivos no se eliminan al terminar la sesiÃ³n.
Ya incluye multiples librerÃ­as (las mas usadas) como Matplotlib, Numpu, Pandas, Scipy, Seaborn, etc. ğŸ’«
Google Colaboratory tiene code snipets, para que puedas utilizarlo y agilizar tu trabajo ğŸ¤¯.
Para abrir la paleta de comandos usamos Ctrl + shift + p. Es Ãºtil conocer los shortcuts mÃ¡s Ãºtiles para ser mÃ¡s Ã¡gil.



## Google Colab: ciencia de datos
Puedes cargar archivos a tu notebook desde tu computadora, pero se borrarÃ¡n una vez cierres tu notebook. TambiÃ©n puedes vincular tu google drive para que tome los archivos desde ahÃ­ y de esta forma conservarlos.

Colab estÃ¡ enfocado a trabajar con Python (tambiÃ©n puede usar otros lenguajes) y ya trae librerÃ­as de ciencia de datos precargadas como:

~~~~
matplotlib: GeneraciÃ³n de grÃ¡ficos a partir de listas o arrays.

numpy: CÃ³mputo cientÃ­fico para la manipulaciÃ³n de vectores.

pandas: ManipulaciÃ³n y anÃ¡lisis de datos de tablas y series temporales.

scipy: Herramientas y algoritmos matemÃ¡ticos.

seaborn: VisualizaciÃ³n de datos estadÃ­sticos.
~~~~

Colab tambiÃ©n tiene fragmentos de cÃ³digo (parecido a la herramienta para insertar funciones de Excel) que te facilita la programaciÃ³n.
Con ctrl + shift +p abres la paleta de comandos, si escribes shortcuts o atajos de teclado te mostrarÃ¡ una lista de todos los atajos que puedes ejecutar en Colab.


Otra forma para acceder a los archivos en Google Drive

Paso 1
~~~~
from google.colab import drive
drive.mount('/content/drive/')
~~~~
Accedemos al link que nos da como respuesta al ejecutar las dos lÃ­neas de cÃ³digo de arriba y le damos permiso de acceso a nuestra cuenta de Drive.

Paso 2
~~~~
%cd '/content/drive/My Drive/Carpeta_donde_se_encuentra_el_archivo/'
!ls
~~~~
Con %cd accedemos a la carpeta donde tenemos el archivo con el que vamos a trabajar
con !ls nos aseguramos que estamos en la carpeta correcta

Paso 3
~~~~
import pandas as pd
df = pd.read_csv('iris.csv')
~~~~
Por Ãºltimo, importamos pandas (librerÃ­a para leer archivos .csv) y cargamos el archivo como data frame.


## Utilizar Deepnote.

Deepnote es un servicio en la nube basado en Jupyter Notebooks. No requiere configuraciÃ³n y tiene un trabajo a nivel de proyecto. Tiene colaboraciÃ³n en tiempo real, integraciÃ³n con mÃºltiples Apps y tiene acceso a una terminal o lÃ­nea de comandos integrada ğŸ˜.

Tiene tambiÃ©n variables de entorno y permite publicar proyectos (para construir portafolio). ğŸ‰

Podemos correr y agregar lo mismo que en Colab, pero ademÃ¡s podemos subir archivos que se quedan siempre en el proyecto.

Permite previsualizar los archivos CSV de manera muy bonita ğŸ˜„.
Parte de lo poderoso de Deepnote es que podemos integrar muchas cosas ğŸ”¥.
No solo podemos agregar celdas de cÃ³digo y de texto, si no que en la opciÃ³n de Bloque vienen muchos mÃ¡s tipos, como input, chart, dataframe sql, etc ğŸ¤¯. Puede crear grÃ¡ficas de manera automÃ¡tica sin cÃ³digo!
Para acceder a los atajos de teclado usamos Ctrl + i.
TambiÃ©n es importante resaltar que tenemos una terminal integrada ğŸ¤–.


## Instalar VSCode

Editores de cÃ³digo: Enfocados a multiples lenguajes. Se pueden potencial con extensiones o plugins. Por lo general son gratuitos. Mejor este ğŸ˜„. Tenemos Pycharm VSCode, Atom, etc.

IDE (entornos de desarrollo integrado): Enfocado a un solo lenguaje y seguimiento a un solo proyecto. Por lo general son de pago ğŸ’¸

Visual Studio Code - Code Editing. Redefined

## Agregar extensiones para VSCode.

Hay muchas extensiones para VSCode que hacen trabajar con datos mÃ¡s cÃ³modo. â˜ï¸
Se pueden instalar todas las extensiones directamente desde VSCode ğŸ˜„.
Es recomendable activar la sincronizaciÃ³n automÃ¡tica en la nube, para que siempre puedas tener tu entorno de trabajo en cualquier lugar. Lo puedes contectar con tu cuenta de GitHub ğŸ¤–
Hay extension para Python que incluye muchas funcionalidades ğŸ”¥.
MagicPython sirve mucho para darle formato a Python y que sea mÃ¡s legible.
Las extensiones de Icon sirven para diferenciar tipos de archivos. ğŸ“
Rainbow Brackets sirve para cambiar los colores de los parÃ©ntesis y no tener errores ğŸŒˆ.
Remote Development te descarga mÃºltiples extensiones que te sirven trabajar de manera remota. ğŸŒ


## Uso de VSCode notebooks.

Esto es un nuevo estilo de Notebook, integrado dentro de VSCode ğŸ¤¯.
Puedes abrir VSCode en una carpeta especÃ­fica para ver todos los archivos dentro (y solo esos). Menos distracciÃ³n que tener todo abierto con WSL. ğŸ˜†
Podemos correr los archivos .py directamente en la terminal dando click en â–¶ï¸.
Con las extensiones que instalamos, podemos darle formato de manera automÃ¡tica a nuestro cÃ³digo ğŸ.
Dentro de los Jupyter Notebook en VSCode podemos usar todas estas extensiones ğŸ’•. La extensiÃ³n de los Notebooks es .ipynb. Podemos exportar los notebooks a texto plano!.

## Â¿QuÃ© son los ambientes virtuales?

En la vida real, no vas a trabajar en un solo trabajo, si no en varios, y cada uno tendrÃ¡ diferentes dependencias y requerimientos ğŸ¤”.
Cuando se actualizan o se cambia la configuraciÃ³n de las dependencias de un ambiente que tiene varios proyectos asociados puede haber errores ğŸ›‘.
Para poder separar proyectos, lo que hacemos es crear ambientes virtuales diferentes para cada proyecto. ğŸ§  Entonces la configuraciÃ³n y actualizaciones son para cada proyecto.
Ambiente virtual: Proyecto que puede tener sus propias dependencias, independientemente de las dependencias que tengan los demÃ¡s proyectos (Scott Robinson y la gente de Real Python).

## Instalar Conda a travÃ©s de la terminal.

Conda: Programa diseÃ±ado para gestiÃ³n de paquetes, dependencias y entorno para cualquier lenguaje: Python, R, Ruby, Lua, Scala, Java, JavaScript, etc. AdemÃ¡s, es multiplataforma. ğŸ–¥ï¸

Para instalar conda debes instalar anaconda (versiÃ³n completa, metapaquete de ciencia de datos) o miniconda (versiÃ³n mÃ­nima). ğŸ

Para instalar conda:

Anaconda | Individual Edition

O bien hacer wget -0 anaconda.sh https://repo.anaconda.com/archive/Anaconda3-2021.05-Linux-x86_64.sh.

Para instalar hacemos bash anaconda.sh. ğŸ

Para abrir notebooks usamos jupyter-notebooko bien jupyterlab. Los notebooks que creas ahÃ­ tambiÃ©n los puedes abrir en VSCode.

Para abrir VSCode en la carpeta en el que te encuentras, usas code ..

## Conda: crear y actualizar ambientes.

Conda tiene por defecto el ambiente base ğŸ˜„
conda env list para ver todos tus ambientes existentes.
conda create --name <nombre de ambiente> <paquete1>=<version1> <paquete2>=<version2> para crear un ambiente nuevo. ğŸ‘€ Si no se especifica la versiÃ³n, se toma la mas reciente.
conda activate <nombre de ambiente> para activar un ambiente.
conda deactivate para desactivar el ambiente actual.
conda list muestra todos los paquetes (y sus versiones) en tu ambiente. Para filtrar resultados (en ambientes grandes) conda list pandas.
conda update <paquete> para actualizar la versiÃ³n mas reciente de un paquete.
conda install <paquete>=<version> para poner un paquete en una versiÃ³n especÃ­fica.

Para clonar un ambiente:
~~~~
conda --name [nuevo ambiente] --copy --clone [ambiente]
~~~~



## Conda: abrir VSCode Notebooks con tu ambiente creado

solo se debe cambair el kernel


## Conda: Eliminar ambientes y librerÃ­as.

conda remove <paquete> para desinstalar un paquete en particular. ğŸ—ï¸
conda env remove <nombre de ambiente> para eliminar un ambiente completo ğŸ‘€.
No se puede eliminar el ambiente en el que te encuentras ğŸ¤”. Necesitas desactivarlo primero.


## Conda: Comandos avanzados.

Para buscar paquetes:
Anaconda.org
Podemos encontrar algÃºn paquete que necesitemos en un channel como conda-forge. ğŸ˜¯
conda install --channel <nombre del canal> <paquete> Para instalar un paquete especificando el channel de donde buscarlo.
conda list --revision para listar las revisiones (modificaciones) de tu ambiente; con esto puedes volver en el tiempo a un estado pasado de tu ambiente virtual.
conda install --revision <falg> para regresar a un estado pasado de tu ambiente. ğŸŒ²
conda env export --no-build Para compartir nuestro ambiente de conda y que otras personas puedan tener exactamente el mismo ambiente que tÃº.
Con conda env export --from-history --file <archivo>.yml para compartir Ãºnicamente los paquetes que hayamos especificado explÃ­citamente. ğŸ”. Esta es la mejor manera!
Para instalar un ambiente del cual recibimos un archivo .yml hacemos conda env create --file <archivo>.yml ğŸ¤¯


### Comandos avanzados:

Crear ambiente virtual

 conda create --name [nombre_paquete] [paquetes]

Instalar paquete que no esta disponible en el canal principal de conda:

 conda install -c [nombre_canal] [nombre_paquete] 

Enlistar las revisiones del estado del ambiente virtual:

 conda list --revision

Volver al estado de una revisiÃ³n anterior:

 conda install --revision [nombre_revision]

Crear una descripciÃ³n del ambiente con todas sus dependencia para compartir:

 conda env export  --no-builds

Crear una descripciÃ³n del ambiente solo con los paquetes agregados manualmente (tiene la ventaja que permite mayor compatibilidad multiplataforma, daod que conda se encarga de instalar las dependencias especificas para los paquetes en el SO):

conda env export --from-history

Crear un archivo con la descripciÃ³n(suele ser comÃºn en este tipo de archivos el formato .yml):

conda env export --from-history --file nombre_archivo.yml

Instalar ambiente virtual desde archivo:

conda env create --file nombre_archivo.yml

Espero pueda ser de utilidad para todos!


## Acelerar la creaciÃ³n de ambientes virtuales con Mamba.

Mamba es una re-implementaciÃ³n de Conda (en C++) para la creaciÃ³n de ambientes virtuales. ğŸ¤– Lo hace en paralelo, e incluye multiples optimizaciones que lo hacen mÃ¡s rÃ¡pido.
Mamba funciona de la misma manera que conda en la lÃ­nea de comandos. ğŸ¤”
conda install --channel conda-forge mamba para instalarlo.
Anaconda es muy tardado en multiples ocasiones (ya que es muy pesado). ğŸ˜¢


## Bonus: Divide y vencerÃ¡s.

En proyectos grandes, es complicado mantener un ambiente virtual. ğŸ˜µ
Divide y vencerÃ¡s es partir un problema difÃ­cil en partes pequeÃ±as. Cada paquete se desarrolla a su propio ritmo (no siempre preocupÃ¡ndose de la compatibilidad con otros mÃ³dulos). ğŸ¤¯
Hay tres tipos de paquetes: Externos, Modelo y de ComunicaciÃ³n. Entonces podemos crear en multiples ambientes en un solo proyecto. ğŸ‘€ Para esto, creamos una carpeta llamada envs y creamos tres documentos: external.yml, model.yml y comunicacion.yml.
Snakemake es un paquete que implementa muy bien este concepto. Es un motor de workflows ğŸ‘€. Cada paso lo ejecuta con un ambiente especÃ­fico.

[](https://snakemake.readthedocs.io/en/stable/)
[](https://platzi.com/blog/como-personalizar-tu-terminal/)